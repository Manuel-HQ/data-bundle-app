<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Manuel Data</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
  <header class="site-header">
    <div class="logo">ðŸ“¶ Manuel Data</div>
    <nav class="nav">
  <a href="{{ url_for('dashboard') }}">Home</a>
  <a href="{{ url_for('purchase') }}">Buy Data</a>
  <a href="{{ url_for('profile') }}">Profile</a>
  <a href="{{ url_for('wallet') }}">Wallet</a>
  <a href="{{ url_for('faq') }}">FAQ</a>

  <a href="{{ url_for('contact') }}">Contact</a>
  <a href="{{ url_for('logout') }}" class="login-btn">Logout</a>
</nav>
<div class="hamburger" onclick="openNav()">â˜°</div>

  </header>

  <div id="mobileNav" class="overlay-nav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">Ã—</a>
    <div class="overlay-content">
     <a href="{{ url_for('dashboard') }}">Home</a>
  <a href="{{ url_for('purchase') }}">Buy Data</a>
  <a href="{{ url_for('profile') }}">Profile</a>
  <a href="{{ url_for('wallet') }}">Wallet</a>
  <a href="{{ url_for('faq') }}">FAQ</a>

  <a href="{{ url_for('contact') }}">Contact</a>
  <a href="{{ url_for('logout') }}" class="login-btn">Logout</a>
    </div>
  </div>

  <section class="hero">
    <h1>Welcome {{ username }} ðŸ‘‹</h1>
    <div style="background:#111; padding:10px 15px; border-radius:10px; box-shadow:0 0 5px #0ff;">
  <p style="color:#0ff; font-size:18px;"><strong>Wallet Balance:</strong> GHS {{ '%.2f' | format(balance) }}</p>
</div>

    <p>Your one-stop platform for instant & affordable data bundles in Ghana.</p>
    <a href="{{ url_for('purchase') }}" class="cta-btn">Buy Data Now</a>
  </section>

  <!-- Additional dashboard content can go below -->
    <div class="content">
    <h2>ðŸ“Š Your Purchases</h2>

  <div class="filter-section">
    <label for="statusFilter">Filter by Status:</label>
    <select id="statusFilter">
      <option value="all">All</option>
      <option value="request_created">Request Created</option>
      <option value="payment_completed">Payment Completed</option>
      <option value="credited">Credited</option>
    </select>
  </div>

  <table id="purchasesTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Amount</th>
        <th>Provider</th>
        <th>Number</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for p in purchases %}
      <tr data-status="{{ p['status'] }}">
        <td>{{ p['created_at'] }}</td>
        <td>â‚µ{{ p['amount'] }}</td>
        <td>{{ p['provider'] }}</td>
        <td>{{ p['number'] }}</td>
        <td>
          {% if p['status'] == 'request_created' %}
            <span class="badge request">ðŸŸ¡ Request</span>
          {% elif p['status'] == 'payment_completed' %}
            <span class="badge paid">ðŸ”µ Paid</span>
          {% elif p['status'] == 'credited' %}
            <span class="badge credited">âœ… Credited</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
<script>
    function openNav() {
      document.getElementById("mobileNav").style.width = "100%";
    }

    function closeNav() {
      document.getElementById("mobileNav").style.width = "0%";
    }

     const filterSelect = document.getElementById("statusFilter");
    const rows = document.querySelectorAll("#purchasesTable tbody tr");

    filterSelect.addEventListener("change", () => {
      const selected = filterSelect.value;
      rows.forEach(row => {
        if (selected === "all" || row.dataset.status === selected) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>
